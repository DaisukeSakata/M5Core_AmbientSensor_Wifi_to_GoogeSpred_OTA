; PlatformIO Project Configuration File

[platformio]
default_envs = m5stack-core-esp32-16M  ; デフォルトはUSB環境のまま

; ===========================================
; USB環境（既存の設定）
; ===========================================
[env:m5stack-core-esp32-16M]
platform = espressif32
board = m5stack-core-esp32
framework = arduino
build_flags = 
	-DCORE_DEBUG_LEVEL=3
	-DBOARD_HAS_PSRAM
monitor_speed = 115200
lib_deps = 
	m5stack/M5Unified@^0.2.8
	tinyu-zhao/TinyGPSPlus-ESP32@^0.0.2
	adafruit/Adafruit SHT4x Library@^1.0.5
	adafruit/Adafruit BMP280 Library@^2.6.8
	milesburton/DallasTemperature@^4.0.5
	ambientdatainc/Ambient ESP32 ESP8266 lib@^1.0.5
	mprograms/QMC5883LCompass@^1.2.3
upload_speed = 115200

; ===========================================
; OTA環境（新規追加）
; ===========================================
[env:ota]
platform = espressif32
board = m5stack-core-esp32
framework = arduino
build_flags = 
	-DCORE_DEBUG_LEVEL=3
	-DBOARD_HAS_PSRAM
monitor_speed = 115200
lib_deps = 
	m5stack/M5Unified@^0.2.8
	tinyu-zhao/TinyGPSPlus-ESP32@^0.0.2
	adafruit/Adafruit SHT4x Library@^1.0.5
	adafruit/Adafruit BMP280 Library@^2.6.8
	milesburton/DallasTemperature@^4.0.5
	ambientdatainc/Ambient ESP32 ESP8266 lib@^1.0.5
	mprograms/QMC5883LCompass@^1.2.3

; OTA設定 - 以下の3つから選択してコメントを解除
upload_protocol = espota

; 方法1: ホスト名を使用（mDNSが動作する環境）
upload_port = esp32-0D1818.local

; 方法2: IPアドレスを直接指定（確実）
; upload_port = 192.168.0.21

; 方法3: 環境変数から取得（柔軟）
; upload_port = ${sysenv.OTA_IP}

upload_flags = 
	--port=3232
	; --auth=password  ; パスワードを設定している場合はここに追加